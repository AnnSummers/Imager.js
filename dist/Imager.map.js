{"version":3,"file":"./Imager.min.js","sources":["./Imager.js"],"names":["window","document","applyEach","collection","callbackEach","i","length","new_collection","returnFn","value","noop","trueFn","debounce","fn","wait","timeout","context","this","args","arguments","later","apply","clearTimeout","setTimeout","Imager","elements","opts","self","doc","undefined","selector","viewportHeight","documentElement","clientHeight","className","gif","createElement","src","alt","lazyloadOffset","scrollDelay","onResize","hasOwnProperty","lazyload","scrolled","availablePixelRatios","availableWidths","defaultWidths","onImagesReplaced","widthsMap","refreshPixelRatio","widthInterpolator","removeAttribute","createWidthsMap","devicePixelRatio","getKeys","sort","a","b","divs","querySelectorAll","ready","onReady","changeDivsToEmptyImages","init","addEvent","addEventListener","el","eventName","attachEvent","Object","keys","object","key","push","prototype","add","elementsOrSelector","concat","scrollCheck","offscreenImageCount","element","isPlaceholder","isThisElementOnScreen","clearInterval","interval","initialized","filterFn","registerScrollEvent","checkImagesNeedReplacing","registerResizeEvent","createGif","match","RegExp","elementClassName","getAttribute","elementWidth","cloneNode","width","setAttribute","parentNode","replaceChild","elementOffsetTop","offset","getPageOffset","offsetParent","offsetTop","images","isResizing","image","replaceImagesBasedOnScreenDimensions","computedWidth","naturalWidth","getNaturalWidth","determineAppropriateResolution","changeImageSrcToUseNewImageDimensions","getClosestValue","clientWidth","getPixelRatio","selectedWidth","replace","transforms","pixelRatio","widths","interpolator","map","baseValue","candidates","parseFloat","setInterval","getPageOffsetGenerator","testCase","pageYOffset","scrollTop","Image","imageCopy","call","module","exports","define","amd"],"mappings":"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"}