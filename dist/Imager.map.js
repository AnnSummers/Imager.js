{"version":3,"file":"./Imager.min.js","sources":["./Imager.js"],"names":["window","document","addEvent","addEventListener","el","eventName","fn","attachEvent","defaultWidths","getKeys","Object","keys","object","key","push","applyEach","collection","callbackEach","i","length","new_collection","returnFn","value","noop","trueFn","debounce","wait","timeout","context","this","args","arguments","later","apply","clearTimeout","setTimeout","Imager","elements","opts","self","doc","undefined","selector","viewportHeight","documentElement","clientHeight","className","gif","createElement","src","alt","lazyloadOffset","scrollDelay","onResize","hasOwnProperty","lazyload","scrolled","availablePixelRatios","availableWidths","onImagesReplaced","widthsMap","refreshPixelRatio","widthInterpolator","removeAttribute","createWidthsMap","devicePixelRatio","sort","a","b","divs","add","ready","onReady","init","prototype","elementsOrSelector","querySelectorAll","concat","changeDivsToEmptyImages","scrollCheck","offscreenImageCount","element","isPlaceholder","isThisElementOnScreen","clearInterval","interval","initialized","filterFn","registerScrollEvent","checkImagesNeedReplacing","registerResizeEvent","createGif","match","RegExp","elementClassName","getAttribute","elementWidth","cloneNode","width","setAttribute","parentNode","replaceChild","elementOffsetTop","offset","getPageOffset","offsetParent","offsetTop","images","isResizing","image","replaceImagesBasedOnScreenDimensions","computedWidth","naturalWidth","getNaturalWidth","determineAppropriateResolution","changeImageSrcToUseNewImageDimensions","getClosestValue","clientWidth","getPixelRatio","selectedWidth","replace","transforms","pixelRatio","widths","interpolator","map","baseValue","candidates","parseFloat","setInterval","getPageOffsetGenerator","testCase","pageYOffset","scrollTop","Image","imageCopy","call","module","exports","define","amd"],"mappings":"CAAE,SAAUA,EAAQC,GAChB,YAEA,IAAIC,GAAW,WACX,MAAID,GAASE,iBACF,SAAkCC,EAAIC,EAAWC,GACpD,MAAOF,GAAGD,iBAAiBE,EAAWC,GAAI,IAIvC,SAA4BF,EAAIC,EAAWC,GAC9C,MAAOF,GAAGG,YAAY,KAAOF,EAAWC,OAKhDE,GAAiB,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAE1GC,EAAiC,kBAAhBC,QAAOC,KAAsBD,OAAOC,KAAO,SAAUC,GACtE,GACIC,GADAF,IAGJ,KAAKE,IAAOD,GACRD,EAAKG,KAAKD,EAGd,OAAOF,IAGPI,EAAY,SAAUC,EAAYC,GAKlC,IAJA,GAAIC,GAAI,EACJC,EAASH,EAAWG,OACpBC,KAEOD,EAAJD,EAAYA,IACfE,EAAeF,GAAKD,EAAaD,EAAWE,GAAIA,EAGpD,OAAOE,IAGPC,EAAW,SAAUC,GAAS,MAAOA,IACrCC,EAAO,aACPC,EAAS,WAAc,OAAO,GAE9BC,EAAW,SAAUnB,EAAIoB,GACzB,GAAIC,EACJ,OAAO,YACH,GAAIC,GAAUC,KAAMC,EAAOC,UACvBC,EAAQ,WACRL,EAAU,KACVrB,EAAG2B,MAAML,EAASE,GAEtBI,cAAaP,GACbA,EAAUQ,WAAWH,EAAON,KAiChCU,EAAS,SAAUC,EAAUC,GAC7B,GAAIC,GAAOV,KACPW,EAAOvC,CAEXqC,GAAOA,MAEUG,SAAbJ,IAGwB,gBAAbA,IACPC,EAAKI,SAAWL,EAChBA,EAAWI,QAIqB,mBAApBJ,GAASlB,SACrBmB,EAAOD,EACPA,EAAWI,SAInBZ,KAAKc,eAAmBH,EAAII,gBAAgBC,aAC5ChB,KAAKa,SAAoBL,EAAsD,KAA1CC,EAAKI,UAAY,sBACtDb,KAAKiB,UAAmBR,EAAKQ,WAAa,gBAC1CjB,KAAKkB,IAAmBP,EAAIQ,cAAc,OAC1CnB,KAAKkB,IAAIE,IAAe,6FACxBpB,KAAKkB,IAAID,UAAejB,KAAKiB,UAC7BjB,KAAKkB,IAAIG,IAAe,GACxBrB,KAAKsB,eAAmBb,EAAKa,gBAAkB,EAC/CtB,KAAKuB,YAAmBd,EAAKc,aAAe,IAC5CvB,KAAKwB,SAAmBf,EAAKgB,eAAe,YAAchB,EAAKe,UAAW,EAC1ExB,KAAK0B,SAAmBjB,EAAKgB,eAAe,YAAchB,EAAKiB,UAAW,EAC1E1B,KAAK2B,UAAmB,EACxB3B,KAAK4B,qBAAuBnB,EAAKmB,uBAAyB,EAAG,GAC7D5B,KAAK6B,gBAAmBpB,EAAKoB,iBAAmBlD,EAChDqB,KAAK8B,iBAAmBrB,EAAKqB,kBAAoBpC,EACjDM,KAAK+B,aACL/B,KAAKgC,oBACLhC,KAAKiC,kBAAoBxB,EAAKwB,mBAAqBzC,EAGnDQ,KAAKkB,IAAIgB,gBAAgB,UACzBlC,KAAKkB,IAAIgB,gBAAgB,SAEW,kBAAzBlC,MAAK6B,kBAC6B,gBAAhC7B,MAAK6B,gBAAgBvC,OAC9BU,KAAK+B,UAAYxB,EAAO4B,gBAAgBnC,KAAK6B,gBAAiB7B,KAAKiC,kBAAmBjC,KAAKoC,mBAG3FpC,KAAK+B,UAAY/B,KAAK6B,gBACtB7B,KAAK6B,gBAAkBjD,EAAQoB,KAAK6B,kBAGtC7B,KAAK6B,gBAAkB7B,KAAK6B,gBAAgBQ,KAAK,SAAUC,EAAGC,GAC5D,MAAOD,GAAIC,KAIfvC,KAAKwC,QACLxC,KAAKyC,IAAIjC,GAAYR,KAAKa,UAC1Bb,KAAK0C,MAAMjC,EAAKkC,SAEhBrC,WAAW,WACPI,EAAKkC,QACN,GAGPrC,GAAOsC,UAAUJ,IAAM,SAAUK,GAE7BA,EAAqBA,GAAsB9C,KAAKa,QAChD,IAAIL,GAAyC,gBAAvBsC,GAClB1E,EAAS2E,iBAAiBD,GAC1BA,CAEAtC,GAASlB,SACTU,KAAKwC,KAAOxC,KAAKwC,KAAKQ,OAAO9D,EAAUsB,EAAUhB,IACjDQ,KAAKiD,wBAAwBjD,KAAKwC,QAI1CjC,EAAOsC,UAAUK,YAAc,WAC3B,GAAIxC,GAAOV,KACPmD,EAAsB,EACtB3C,IAEAR,MAAK2B,WAELzC,EAAUc,KAAKwC,KAAM,SAAUY,GACvB1C,EAAK2C,cAAcD,OACjBD,EAEEzC,EAAK4C,sBAAsBF,IAC3B5C,EAASvB,KAAKmE,MAKE,IAAxBD,GACAhF,EAAOoF,cAAc7C,EAAK8C,UAG9BxD,KAAKiD,wBAAwBzC,GAC7BR,KAAK2B,UAAW,IAIxBpB,EAAOsC,UAAUD,KAAO,WACpB,GAAIlC,GAAOV,IAEXA,MAAKyD,aAAc,CACnB,IAAIC,GAAW/D,CAEXK,MAAK0B,UACL1B,KAAK2D,sBAEL3D,KAAK2B,UAAW,EAChBjB,EAAKwC,cAELQ,EAAW,SAAUN,GACjB,MAAO1C,GAAK2C,cAAcD,MAAa,IAI3CpD,KAAK4D,yBAAyB5D,KAAKwC,MAGnCxC,KAAKwB,UACLxB,KAAK6D,oBAAoBH,GAG7B1D,KAAK2C,WAUTpC,EAAOsC,UAAUH,MAAQ,SAAUjE,GAC/BuB,KAAK2C,QAAUlE,GAAMiB,GAGzBa,EAAOsC,UAAUiB,UAAY,SAAUV,GAEnC,GAAIA,EAAQnC,UAAU8C,MAAM,GAAIC,QAAO,QAAUhE,KAAKiB,UAAY,UAC9D,MAAOmC,EAGX,IAAIa,GAAmBb,EAAQc,aAAa,cACxCC,EAAef,EAAQc,aAAa,cACpChD,EAAMlB,KAAKkB,IAAIkD,WAAU,EAa7B,OAXID,KACFjD,EAAImD,MAAQF,EACZjD,EAAIoD,aAAa,aAAcH,IAGjCjD,EAAID,WAAagD,EAAmBA,EAAmB,IAAM,IAAMjE,KAAKiB,UACxEC,EAAIoD,aAAa,WAAYlB,EAAQc,aAAa,aAClDhD,EAAIoD,aAAa,MAAOlB,EAAQc,aAAa,aAAelE,KAAKkB,IAAIG,KAErE+B,EAAQmB,WAAWC,aAAatD,EAAKkC,GAE9BlC,GAGXX,EAAOsC,UAAUI,wBAA0B,SAAUzC,GACjD,GAAIE,GAAOV,IAEXd,GAAUsB,EAAU,SAAU4C,EAAS/D,GACnCmB,EAASnB,GAAKqB,EAAKoD,UAAUV,KAG7BpD,KAAKyD,aACLzD,KAAK4D,yBAAyBpD,IAWtCD,EAAOsC,UAAUQ,cAAgB,SAAUD,GACvC,MAAOA,GAAQhC,MAAQpB,KAAKkB,IAAIE,KASpCb,EAAOsC,UAAUS,sBAAwB,SAAUF,GAG/C,GAAIqB,GAAmB,EACnBC,EAASnE,EAAOoE,gBAAkB3E,KAAKsB,cAE3C,IAAI8B,EAAQwB,aACR,EACIH,IAAoBrB,EAAQyB,gBAEzBzB,EAAUA,EAAQwB,aAG7B,OAAOH,GAAoBzE,KAAKc,eAAiB4D,GAGrDnE,EAAOsC,UAAUe,yBAA2B,SAAUkB,EAAQpB,GAC1D,GAAIhD,GAAOV,IACX0D,GAAWA,GAAY/D,EAElBK,KAAK+E,aACN/E,KAAK+E,YAAa,EAClB/E,KAAKgC,oBAEL9C,EAAU4F,EAAQ,SAAUE,GACpBtB,EAASsB,IACTtE,EAAKuE,qCAAqCD,KAIlDhF,KAAK+E,YAAa,EAClB/E,KAAK8B,iBAAiBgD,KAS9BvE,EAAOsC,UAAUoC,qCAAuC,SAAUD,GAC9D,GAAIE,GAAeC,CAE1BA,GAAe5E,EAAO6E,gBAAgBJ,GAC/BE,EAAgD,kBAAzBlF,MAAK6B,gBAAiC7B,KAAK6B,gBAAgBmD,GACrBhF,KAAKqF,+BAA+BL,GAEjGA,EAAMX,MAAQa,GAETlF,KAAKqD,cAAc2B,IAA2BG,GAAjBD,IAIlCF,EAAM5D,IAAMpB,KAAKsF,sCAAsCN,EAAMd,aAAa,YAAagB,GACvFF,EAAM9C,gBAAgB,SACtB8C,EAAM9C,gBAAgB,YAG1B3B,EAAOsC,UAAUwC,+BAAiC,SAAUL,GAC1D,MAAOzE,GAAOgF,gBAAgBP,EAAMd,aAAa,eAAiBc,EAAMT,WAAWiB,YAAaxF,KAAK6B,kBAYvGtB,EAAOsC,UAAUb,kBAAoB,WACjChC,KAAKoC,iBAAmB7B,EAAOgF,gBAAgBhF,EAAOkF,gBAAiBzF,KAAK4B,uBAGhFrB,EAAOsC,UAAUyC,sCAAwC,SAAUlE,EAAKsE,GACpE,MAAOtE,GACFuE,QAAQ,WAAYpF,EAAOqF,WAAWvB,MAAMqB,EAAe1F,KAAK+B,YAChE4D,QAAQ,iBAAkBpF,EAAOqF,WAAWC,WAAW7F,KAAKoC,oBAGrE7B,EAAOkF,cAAgB,SAAuB1F,GAC1C,OAAQA,GAAW5B,GAA0B,kBAAK,GAGtDoC,EAAO4B,gBAAkB,SAA0B2D,EAAQC,EAAcF,GAIrE,IAHA,GAAIG,MACA3G,EAAMyG,EAAOxG,OAEVD,KACH2G,EAAIF,EAAOzG,IAAM0G,EAAaD,EAAOzG,GAAIwG,EAG7C,OAAOG,IAGXzF,EAAOqF,YACHC,WAAY,SAAUpG,GAClB,MAAiB,KAAVA,EAAc,GAAK,IAAMA,EAAQ,KAE5C4E,MAAO,SAAUA,EAAO2B,GACpB,MAAOA,GAAI3B,IAAUA,IAsB7B9D,EAAOgF,gBAAkB,SAAyBU,EAAWC,GACzD,GAAI7G,GAAgB6G,EAAW5G,OAC3BoG,EAAgBQ,EAAW7G,EAAI,EAInC,KAFA4G,EAAYE,WAAWF,GAEhB5G,KACC4G,GAAaC,EAAW7G,KACxBqG,EAAgBQ,EAAW7G,GAInC,OAAOqG,IAGXnF,EAAOsC,UAAUgB,oBAAsB,SAAUH,GAC7C,GAAIhD,GAAOV,IAEX3B,GAASF,EAAQ,SAAUyB,EAAS,WAChCc,EAAKkD,yBAAyBlD,EAAK8B,KAAMkB,IAC1C,OAGPnD,EAAOsC,UAAUc,oBAAsB,WACnC,GAAIjD,GAAOV,IAEXA,MAAK2B,UAAW,EAEhB3B,KAAKwD,SAAWrF,EAAOiI,YAAY,WAC/B1F,EAAKwC,eACNxC,EAAKa,aAERlD,EAASF,EAAQ,SAAU,WACvBuC,EAAKiB,UAAW,IAGpBtD,EAASF,EAAQ,SAAU,WACvBuC,EAAKI,eAAiB1C,EAAS2C,gBAAgBC,aAC/CN,EAAKiB,UAAW,KAIxBpB,EAAO8F,uBAAyB,SAA+BC,GAC3D,MAAGA,GACQ,WAAc,MAAOnI,GAAOoI,aAG5B,WAAc,MAAOnI,GAAS2C,gBAAgByF,YAW7DjG,EAAO6E,gBAAkB,WACrB,MAAI,gBAAkB,IAAKqB,OAChB,SAAUzB,GACb,MAAOA,GAAMG,cAId,SAAUH,GACb,GAAI0B,GAAYtI,EAAS+C,cAAc,MAEvC,OADAuF,GAAUtF,IAAM4D,EAAM5D,IACfsF,EAAUrC,UAKzB9D,EAAOoE,cAAgBpE,EAAO8F,uBAAuBxH,OAAOgE,UAAUpB,eAAekF,KAAKxI,EAAQ,gBAGlGoC,EAAOrB,UAAYA,EACnBqB,EAAOlC,SAAWA,EAClBkC,EAAOX,SAAWA,EAGI,gBAAXgH,SAAiD,gBAAnBA,QAAOC,QAE5CD,OAAOC,QAAUA,QAAUtG,EACF,kBAAXuG,SAAyBA,OAAOC,IAE9CD,OAAO,WAAc,MAAOvG,KACH,gBAAXpC,KAEdA,EAAOoC,OAASA,IAItBpC,OAAQC"}